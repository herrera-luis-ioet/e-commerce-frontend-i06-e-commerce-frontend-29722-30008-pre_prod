{"is_source_file": true, "format": "TypeScript", "description": "This file contains API client configuration and error handling for API requests, including a custom error class for API errors and request/response interceptors using Axios.", "external_files": ["axios"], "external_methods": ["axios.create", "axios.isAxiosError"], "published": ["apiClient", "apiRequest"], "classes": [{"name": "ApiError", "description": "Custom error class for handling API errors with additional properties for error type, status, and response data."}], "methods": [{"name": "apiRequest", "description": "Generic function to make API requests using the configured Axios client, returning the response data or throwing an ApiError on failure."}, {"name": "function mapStatusToErrorType(status: number): ApiErrorType { mapStatusToErrorType", "description": "Maps HTTP status codes to corresponding ApiErrorType values.", "scope": "", "scopeKind": ""}, {"name": "constructor(message: string, type: ApiErrorType = ApiErrorType.UNKNOWN, status: number | null / constructor", "scope": "ApiError", "scopeKind": "class", "description": "unavailable"}], "calls": ["axios.create", "apiClient.interceptors.request.use", "apiClient.interceptors.response.use"], "search-terms": ["ApiError", "apiClient", "apiRequest", "axios interceptors"], "state": 2, "file_id": 41, "knowledge_revision": 120, "git_revision": "f43d7d79b7b6a56efcbf377266a6bfa8c410eb56", "revision_history": [{"83": ""}, {"120": "f43d7d79b7b6a56efcbf377266a6bfa8c410eb56"}], "ctags": [{"_type": "tag", "name": "API_BASE_URL", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'https:\\/\\/api.example.com';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "API_TIMEOUT", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^const API_TIMEOUT = 30000; \\/\\/ 30 seconds$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "ApiError", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^export class ApiError extends Error {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "ApiErrorType", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^export enum ApiErrorType {$/", "language": "TypeScript", "kind": "enum"}, {"_type": "tag", "name": "FORBIDDEN", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  FORBIDDEN = 'FORBIDDEN',$/", "language": "TypeScript", "kind": "enumerator", "scope": "ApiErrorType", "scopeKind": "enum"}, {"_type": "tag", "name": "NETWORK_ERROR", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  NETWORK_ERROR = 'NETWORK_ERROR',$/", "language": "TypeScript", "kind": "enumerator", "scope": "ApiErrorType", "scopeKind": "enum"}, {"_type": "tag", "name": "NOT_FOUND", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  NOT_FOUND = 'NOT_FOUND',$/", "language": "TypeScript", "kind": "enumerator", "scope": "ApiErrorType", "scopeKind": "enum"}, {"_type": "tag", "name": "SERVER_ERROR", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  SERVER_ERROR = 'SERVER_ERROR',$/", "language": "TypeScript", "kind": "enumerator", "scope": "ApiErrorType", "scopeKind": "enum"}, {"_type": "tag", "name": "TIMEOUT", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  TIMEOUT = 'TIMEOUT',$/", "language": "TypeScript", "kind": "enumerator", "scope": "ApiErrorType", "scopeKind": "enum"}, {"_type": "tag", "name": "UNAUTHORIZED", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  UNAUTHORIZED = 'UNAUTHORIZED',$/", "language": "TypeScript", "kind": "enumerator", "scope": "ApiErrorType", "scopeKind": "enum"}, {"_type": "tag", "name": "UNKNOWN", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  UNKNOWN = 'UNKNOWN',$/", "language": "TypeScript", "kind": "enumerator", "scope": "ApiErrorType", "scopeKind": "enum"}, {"_type": "tag", "name": "apiClient", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^export const apiClient: AxiosInstance = axios.create({$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "apiError", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^      const apiError = error as AxiosError;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "apiRequest", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^export const apiRequest = async <T>(config: AxiosRequestConfig): Promise<T> => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  constructor(message: string, type: ApiErrorType = ApiErrorType.UNKNOWN, status: number | null /", "language": "TypeScript", "kind": "method", "scope": "ApiError", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^      const data = apiError.response?.data || null;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^    const { status, data } = error.response;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  data: any;$/", "language": "TypeScript", "kind": "property", "scope": "ApiError", "scopeKind": "class"}, {"_type": "tag", "name": "errorMessage", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^    let errorMessage: string;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "errorType", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^    let errorType: ApiErrorType;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "mapStatusToErrorType", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^function mapStatusToErrorType(status: number): ApiErrorType {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "response", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^    const response: AxiosResponse<T> = await apiClient(config);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^      const status = apiError.response?.status || null;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^    const { status, data } = error.response;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  status: number | null;$/", "language": "TypeScript", "kind": "property", "scope": "ApiError", "scopeKind": "class"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^    const token = localStorage.getItem('auth_token');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "pattern": "/^  type: ApiErrorType;$/", "language": "TypeScript", "kind": "property", "scope": "ApiError", "scopeKind": "class"}], "filename": "/home/kavia/workspace/e-commerce-frontend-i06-e-commerce-frontend-29722-30008-pre_prod/src/services/api.ts", "hash": "18795c8394df909f1e472e027aff6c61", "format-version": 4, "code-base-name": "default", "fields": [{"name": "data: any;", "scope": "ApiError", "scopeKind": "class", "description": "unavailable"}, {"name": "let errorMessage: string;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let errorType: ApiErrorType;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "status: number | null;", "scope": "ApiError", "scopeKind": "class", "description": "unavailable"}, {"name": "type: ApiErrorType;", "scope": "ApiError", "scopeKind": "class", "description": "unavailable"}]}